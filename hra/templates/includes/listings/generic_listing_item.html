{% load wagtailcore_tags %}

<li class="results-listing__item js-border-result">
    <a href="{% pageurl result %}">
        <div class="results-listing__item-border js-border-result__border"></div>
        <div class="results-listing__item-heading js-border-result__heading">
            {{ result.listing_title|default:result.title }}
        </div>

        {% with display_date=result.display_date|default:result.latest_revision_created_at %}

            <ul class="results-listing__item-meta">

                <li class="date">{{ display_date|date }}</li>

                {% if result.author %}
                    <li class="author">Author: <span>{{ result.author }}</span></li>
                {% endif %}

                {% if result.categories %}
                    <li class="category">
                        {% for category in result.categories %}
                            {{ category.name }}
                            {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </li>
                {% endif %}

                {% if result.page_types %}
                    <li class="category">
                        {% for page_type in result.page_types %}
                            {{ page_type.name }}
                            {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </li>
                {% endif %}
            </ul>

        {% endwith %}

        {% if pick.description or result.search_description or result.listing_summary %}
            <div class="results-listing__item-content">
                {{ pick.description|default:result.search_description|default:result.listing_summary }}
            </div>
        {% endif %}
    </a>
</li>